@page "/account/{name}"
@using Banksystem


<h1>Welcome @name, @SelectedAccount.Owner.Lastname</h1>

@if (SelectedAccount == null)
{
    <p>No account '@AccountName' found</p>
    <p>And there are @Bank.Accounts.Count() accounts</p>
}
else
{

    <h1>@AccountName</h1>
    <p>Current Balance: @SelectedAccount.Balance</p>
    <label>Deposit Amount
        <input @bind=depositAmount />
    </label>
    <button @onclick=makeDeposit>Make Deposit</button>


<h2>Account Information</h2>

}
Name: @SelectedAccount.Owner.Name
<br>
Lastname: @SelectedAccount.Owner.Lastname
<br>
Balance: @SelectedAccount.Owner.Balance;
<br>
Birhtdate:
<br>
Day: @SelectedAccount.Owner.Birthdate.Day
<br>
Month: @SelectedAccount.Owner.Birthdate.Month
<br>
Year: @SelectedAccount.Owner.Birthdate.Year
<br>



@code {
    [Parameter]
    public string name { get; set; }
    public string lastname { get; set; }
    public string AccountName { get; set; }
    int day;
    int Month;
    int Year;

    decimal depositAmount;
    public Banksystem.Account SelectedAccount;

    protected override void OnInitialized()
    {
        Bank.LoadAccounts();
        foreach (var name in Bank.Accounts)
        {
            if (name.Owner.Name == this.name)
            {
                SelectedAccount = name;
                break;
            }
        }

    }

    void makeDeposit()
    {
        SelectedAccount.Owner.MakeDeposit(depositAmount);
        Bank.SaveAccounts();
    }
}